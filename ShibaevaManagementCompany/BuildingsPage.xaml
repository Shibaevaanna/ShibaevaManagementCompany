<Page x:Class="ShibaevaManagementCompany.Pages.BuildingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Жилой фонд">

    <Grid Background="{StaticResource WhiteColor}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Border Grid.Row="0" Padding="30,20" Background="{StaticResource SecondaryColor}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Жилой фонд" 
                          Style="{StaticResource PageTitleStyle}"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="Обновить" 
                           Style="{StaticResource PrimaryButtonStyle}"
                           Click="BtnRefresh_Click"/>

                    <Button Content="Назад" 
                           Style="{StaticResource SecondaryButtonStyle}"
                           Click="BtnBack_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Содержимое -->
        <Grid Grid.Row="1" Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Статистика -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                <Border Style="{StaticResource StatBlockStyle}">
                    <TextBlock x:Name="txtTotalBuildings" 
                              Text="Домов: 0" 
                              Foreground="{StaticResource WhiteColor}" 
                              FontWeight="Bold"/>
                </Border>
                <Border Style="{StaticResource StatBlockStyle}">
                    <TextBlock x:Name="txtTotalApartments" 
                              Text="Квартир: 0" 
                              Foreground="{StaticResource WhiteColor}" 
                              FontWeight="Bold"/>
                </Border>
                <Border Style="{StaticResource StatBlockStyle}">
                    <TextBlock x:Name="txtTotalArea" 
                              Text="Площадь: 0 м²" 
                              Foreground="{StaticResource WhiteColor}" 
                              FontWeight="Bold"/>
                </Border>
            </StackPanel>

            <!-- Поиск -->
            <Border Grid.Row="1" Style="{StaticResource FilterPanelStyle}">
                <StackPanel>
                    <TextBlock Text="Поиск по адресу:" 
                              FontWeight="Bold"
                              Margin="0,0,0,10"/>
                    <TextBox x:Name="txtSearch" 
                            TextChanged="TxtSearch_TextChanged"/>
                </StackPanel>
            </Border>

            <!-- Таблица домов -->
            <DataGrid x:Name="dgBuildings" 
                     Grid.Row="2">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" 
                                      Binding="{Binding BuildingID}" 
                                      Width="60"/>
                    <DataGridTextColumn Header="Адрес" 
                                      Binding="{Binding Address}" 
                                      Width="*"/>
                    <DataGridTextColumn Header="Дата управления" 
                                      Binding="{Binding ManagementStartDate, StringFormat=dd.MM.yyyy}" 
                                      Width="120"/>
                    <DataGridTextColumn Header="Этажей" 
                                      Binding="{Binding Floors}" 
                                      Width="80"/>
                    <DataGridTextColumn Header="Квартир" 
                                      Binding="{Binding ApartmentsCount}" 
                                      Width="80"/>
                    <DataGridTextColumn Header="Год постройки" 
                                      Binding="{Binding ConstructionYear}" 
                                      Width="100"/>
                    <DataGridTextColumn Header="Площадь (м²)" 
                                      Binding="{Binding TotalArea, StringFormat=N2}" 
                                      Width="100"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Grid>
</Page>